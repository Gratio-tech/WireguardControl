import{spawn as p}from"child_process";const b={Reset:"\x1B[0m",Red:"\x1B[31m",Green:"\x1B[32m",Yellow:"\x1B[33m",Blue:"\x1B[34m",Magenta:"\x1B[35m",Cyan:"\x1B[36m",White:"\x1B[37m"},a=(e,t=[])=>new Promise((r,i)=>{const o=p(e,t);let s="",c="";o.stdout.on("data",n=>{s+=n.toString()}),o.stderr.on("data",n=>{c+=n.toString()}),o.on("close",n=>{n!==0?i(new Error(`executeSingleCommand failed with code ${n}: ${c}`)):r(s.trim())})}),m=async e=>await a("bash",["-c",`echo ${e} | wg pubkey`]),d=async()=>{const e=await a("wg",["genkey"]),t=await a("wg",["genpsk"]),r=await m(e);return{randomKey:e,presharedKey:t,pubKey:r}},u=async()=>{const t=`ip addr show ${await a("bash",["-c","ip route | awk '/default/ {print $5; exit}'"])} | grep "inet" | grep -v "inet6" | head -n 1 | awk '/inet/ {print $2}' | awk -F/ '{print $1}'`;return await a("bash",["-c",t])};export{b as COLORS,a as executeSingleCommand,d as genNewClientKeys,m as genPubKey,u as getServerIP};
